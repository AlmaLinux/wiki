(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{425:function(e,a,t){"use strict";t.r(a);var s=t(27),r=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"elevate-quickstart-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elevate-quickstart-guide"}},[e._v("#")]),e._v(" ELevate Quickstart Guide")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("Before beginning, we "),a("strong",[e._v("HIGHLY")]),e._v(" recommend that you follow system administration best practices and make sure you have backups and/or snapshots of your system before you proceed. It is recommended to do a trial run in a sandbox to verify the upgrade worked as expected before you attempt to upgrade any production system. Please report any issues encountered to the "),a("a",{attrs:{href:"https://bugs.almalinux.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("AlmaLinux Bug Tracker"),a("OutboundLink")],1),e._v(" and/or "),a("a",{attrs:{href:"https://chat.almalinux.org/almalinux/channels/migration",target:"_blank",rel:"noopener noreferrer"}},[e._v("AlmaLinux Chat Migration Channel"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("This guide contains steps on how to upgrade your RHEL-based operating system to the next major version.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Please note, the ELevate project is designed to perform one-step upgrades. If you wish to perform an upgrade from CentOS7, you need to split the process. Please check the "),a("RouterLink",{attrs:{to:"/elevate/ELevating-CentOS7-to-AlmaLinux-10.html"}},[e._v("ELevating CentOS7 to AlmaLinux 10")]),e._v(" guide for more information.")],1)]),e._v(" "),a("p",[e._v("The ELevate project supports a number of 3rd party repositories:")]),e._v(" "),a("ul",[a("li",[e._v("EPEL support is currently available for upgrades to AlmaLinux OS only. "),a("strong",[e._v("Note")]),e._v(", that the support works only for those packages from EL 9 that are currently available for EL 10. Unavailable packages from EL 9 will remain on the system after the upgrade.")]),e._v(" "),a("li",[e._v("Docker CE - for all supported operating systems.")]),e._v(" "),a("li",[e._v("MariaDB - for supported operating systems.")]),e._v(" "),a("li",[e._v("nginx - for supported operating systems.")]),e._v(" "),a("li",[e._v("PostgreSQL - for all supported operating systems.")]),e._v(" "),a("li",[e._v("Imunify - for upgrades to EL 8 and EL 10.")]),e._v(" "),a("li",[e._v("KernelCare - for supported operating systems.")]),e._v(" "),a("li",[e._v("TuxCare - for all supported operating systems.")]),e._v(" "),a("li",[e._v("ELevate - for all supported operating systems.")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can contribute to the project and add more 3rd party repositories support. See more on the "),a("a",{attrs:{href:"/elevate/Contribution-guide"}},[e._v("Contribute")]),e._v(" page.")])]),e._v(" "),a("p",[e._v("Currently, the following upgrade paths are available:")]),e._v(" "),a("p",[a("img",{attrs:{src:"/images/ELevate.webp",alt:"image"}})]),e._v(" "),a("p",[e._v("* - Currently, upgrades to AlmaLinux 10 and AlmaLinux Kitten 10 don't support x86_64_v2 architecture.")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("ELevate currently does not support the "),a("a",{attrs:{href:"https://github.com/AlmaLinux/raspberry-pi/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Raspberry Pi images"),a("OutboundLink")],1),e._v(".")])]),e._v(" "),a("h3",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),a("p",[e._v("Depending on your upgrade path, you'll need one of the following systems installed to use this guide:")]),e._v(" "),a("ul",[a("li",[e._v("CentOS 7 – if you're upgrading to EL 8")]),e._v(" "),a("li",[e._v("AlmaLinux 8 or CentOS Stream 8 – if you're upgrading to EL 9")]),e._v(" "),a("li",[e._v("AlmaLinux 9 or CentOS Stream 9 – if you're upgrading to EL10")])]),e._v(" "),a("p",[a("strong",[e._v("NOTE:")]),e._v(" Since the CentOS 7 repositories are now offline you will need to swap to the CentOS vault, or you can use our CentOS 7 mirror that we've setup for use with ELevate:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-o")]),e._v(" /etc/yum.repos.d/CentOS-Base.repo https://el7.repo.almalinux.org/centos/CentOS-Base.repo\n")])])]),a("h2",{attrs:{id:"upgrade-steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-steps"}},[e._v("#")]),e._v(" Upgrade steps")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("A fully updated system is required to accomplish the upgrade. Install the latest updates and reboot your machine:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum update "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-y")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("reboot")]),e._v("\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Install "),a("code",[e._v("elevate-release")]),e._v(" package with the project repo and GPG key.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-y")]),e._v(" http://repo.almalinux.org/elevate/elevate-release-latest-el"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rpm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--eval")]),e._v(" %rhel"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v(".noarch.rpm\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Install leapp packages and upgrade data for the target OS you want to upgrade to. Possible options are:")]),e._v(" "),a("ul",[a("li",[e._v("leapp-data-almalinux")]),e._v(" "),a("li",[e._v("leapp-data-almalinux-kitten "),a("small",[e._v("* leapp-data-almalinux-kitten package is designed for upgrades from AlmaLinux OS 9 to AlmaLinux Kitten OS 10.")])]),e._v(" "),a("li",[e._v("leapp-data-centos "),a("small",[e._v("* leapp-data-centos package is designed for upgrades to CentOS Stream.")])])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-y")]),e._v(" leapp-upgrade leapp-data-almalinux\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Start a preupgrade check. In the meanwhile, the Leapp utility creates a special "),a("em",[e._v("/var/log/leapp/leapp-report.txt")]),e._v(" file that contains possible problems and recommended solutions. No rpm packages will be installed at this phase.")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("Preupgrade check will fail as the default install doesn't meet all requirements for upgrade.")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" leapp preupgrade\n")])])]),a("p",[e._v("This summary report will help you get a picture of whether it is possible to continue the upgrade.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("In certain configurations, Leapp generates "),a("em",[e._v("/var/log/leapp/answerfile")]),e._v(" with true/false questions. Leapp utility requires answers to all these questions in order to proceed with the upgrade.")])])]),e._v(" "),a("li",[a("p",[e._v("The following fixes from "),a("em",[e._v("the /var/log/leapp/leapp-report.txt")]),e._v(" file are the most popular ones, but it's recommended to review the whole file.")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("For CentOS 7:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" rmmod pata_acpi\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" PermitRootLogin "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("yes")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("tee")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-a")]),e._v(" /etc/ssh/sshd_config\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" leapp answer "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--section")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("remove_pam_pkcs11_module_check.confirm")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("True\n")])])])]),e._v(" "),a("li",[a("p",[e._v("For RHEL8-based operating systems:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sed")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-i")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"s/^AllowZoneDrifting=.*/AllowZoneDrifting=no/"')]),e._v(" /etc/firewalld/firewalld.conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" leapp answer "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--section")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("check_vdo.confirm")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("True\n")])])])]),e._v(" "),a("li",[a("p",[e._v("There have been no widely popular fixes for RHEL9-based operating systems. The inhibitor can be unsupported x86_64_v2 hardware.")])])]),e._v(" "),a("p",[e._v("Check the "),a("a",{attrs:{href:"/elevate/ELevate-frequent-issues"}},[e._v("ELevate Frequent Issues")]),e._v(" page for known and frequent issues and guidance steps to solve them.")])]),e._v(" "),a("li",[a("p",[e._v("Start an upgrade. You'll be offered to reboot the system after this process is completed.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" leapp upgrade\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("reboot")]),e._v("\n")])])])]),e._v(" "),a("li",[a("p",[e._v("A new entry in GRUB called "),a("code",[e._v("ELevate-Upgrade-Initramfs")]),e._v(" will appear. The system will be automatically booted into it. See how the update process goes in the console.")])]),e._v(" "),a("li",[a("p",[e._v("After reboot, login to the system and check how the upgrade went. Verify that the current OS is the one you need. Check logs and packages left from previous OS version, consider removing them or update manually.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" /etc/redhat-release\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" /etc/os-release\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rpm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-qa")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" el7 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# for 7 to 8 upgrade")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rpm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-qa")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" el8 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# for 8 to 9 upgrade")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rpm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-qa")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" el9 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# for 9 to 10 upgrade")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" /var/log/leapp/leapp-report.txt\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" /var/log/leapp/leapp-upgrade.log\n")])])])])]),e._v(" "),a("h3",{attrs:{id:"demo-video"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#demo-video"}},[e._v("#")]),e._v(" Demo Video")]),e._v(" "),a("p",[e._v("Here we have provided a demo of a CentOS 7.x to AlmaLinux 8.x upgrade using the AlmaLinux ELevate Project.")]),e._v(" "),a("iframe",{attrs:{width:"856",height:"482",src:"https://www.youtube.com/embed/Vzl9QxG5mvo",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),e._v(" "),a("h2",{attrs:{id:"get-help"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-help"}},[e._v("#")]),e._v(" Get Help")]),e._v(" "),a("p",[e._v("For more help and assistance reach out to us in the ~migration channel on the "),a("a",{attrs:{href:"https://chat.almalinux.org/almalinux/channels/migration",target:"_blank",rel:"noopener noreferrer"}},[e._v("AlmaLinux Community Chat"),a("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);a.default=r.exports}}]);