(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{505:function(a,t,e){"use strict";e.r(t);var s=e(27),r=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"a08-❯-earlyoom-out-of-memory-installation-guide"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a08-❯-earlyoom-out-of-memory-installation-guide"}},[a._v("#")]),a._v(" A08 ❯ Earlyoom (Out of Memory) Installation Guide")]),a._v(" "),t("p",[t("small",[a._v("ℹ️ This article is part of AlmaLinux "),t("RouterLink",{attrs:{to:"/series/"}},[a._v("System Series")]),a._v(".")],1)]),a._v(" "),t("p",[a._v("EarlyOOM project can be found here: "),t("a",{attrs:{href:"https://github.com/rfjakob/earlyoom",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/rfjakob/earlyoom"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"install-earlyoom"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-earlyoom"}},[a._v("#")]),a._v(" Install EarlyOOM:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" earlyoom "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),t("h2",{attrs:{id:"configure-earlyoom-to-start-at-boot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-earlyoom-to-start-at-boot"}},[a._v("#")]),a._v(" Configure EarlyOOM to start at boot:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" earlyoom\n")])])]),t("h2",{attrs:{id:"configure-earlyoom-parameters"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-earlyoom-parameters"}},[a._v("#")]),a._v(" Configure Earlyoom Parameters:")]),a._v(" "),t("p",[a._v("Open the terminal on the host machine.")]),a._v(" "),t("h2",{attrs:{id:"gain-administrative-privileges-by-using-the-sudo-command"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gain-administrative-privileges-by-using-the-sudo-command"}},[a._v("#")]),a._v(" Gain administrative privileges by using the sudo command:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v("\n")])])]),t("h2",{attrs:{id:"open-the-etc-default-earlyoom-file-in-a-text-editor-of-your-choice-for-example-you-can-use-the-nano-editor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#open-the-etc-default-earlyoom-file-in-a-text-editor-of-your-choice-for-example-you-can-use-the-nano-editor"}},[a._v("#")]),a._v(" Open the /etc/default/earlyoom file in a text editor of your choice. For example, you can use the nano editor:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" /etc/default/earlyoom\n")])])]),t("h2",{attrs:{id:"find-or-add-the-following-lines-to-the-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#find-or-add-the-following-lines-to-the-file"}},[a._v("#")]),a._v(" Find or add the following lines to the file:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("EARLYOOM_ARGS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"-m 10 -s 75 -r 3600 --avoid '(^|/)(init|Xorg|ssh|gnome)$'\"")]),a._v("\n")])])]),t("p",[a._v("Save the changes and exit the text editor. If you are using nano, you can press Ctrl + X, then press Y to confirm changes, and finally press Enter to exit.")]),a._v(" "),t("p",[t("strong",[a._v("Please note that these are the options that worked in my case and may not work for all specific cases. Please refer to the command options for EarlyOOM:")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("User\nCommand line options\nearlyoom v1.6.2-34-g75a8852-dirty\nUsage: ./earlyoom "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTION"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" PERCENT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(",KILL_PERCENT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" available memory minimum to PERCENT of total\n                            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" %"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(".\n                            earlyoom sends SIGTERM once below PERCENT, "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n                            SIGKILL once below KILL_PERCENT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default PERCENT/2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(".\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" PERCENT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(",KILL_PERCENT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("free")]),a._v(" swap minimum to PERCENT of total "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default\n                            "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" %"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(".\n                            Note: both memory and swap must be below minimum "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v("\n")])])]),t("p",[a._v("Reference: "),t("a",{attrs:{href:"https://github.com/rfjakob/earlyoom",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/rfjakob/earlyoom"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"set-the-owner-and-group-of-the-file-to-root"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-the-owner-and-group-of-the-file-to-root"}},[a._v("#")]),a._v(" Set the owner and group of the file to root:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chown")]),a._v(" root:root /etc/default/earlyoom\n")])])]),t("h2",{attrs:{id:"set-the-file-permissions-to-0644"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-the-file-permissions-to-0644"}},[a._v("#")]),a._v(" Set the file permissions to 0644:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" 0644 /etc/default/earlyoom\n")])])]),t("h1",{attrs:{id:"notify-the-system-about-the-changes-made-by-restarting-the-earlyoom-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#notify-the-system-about-the-changes-made-by-restarting-the-earlyoom-service"}},[a._v("#")]),a._v(" Notify the system about the changes made by restarting the earlyoom service:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl restart earlyoom\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);