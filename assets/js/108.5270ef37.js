(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{420:function(e,t,a){"use strict";a.r(t);var s=a(27),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"contribute-to-the-elevate-project"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contribute-to-the-elevate-project"}},[e._v("#")]),e._v(" Contribute to the ELevate project")]),e._v(" "),t("p",[e._v("We welcome contributors to the ELevate project. You can help with:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#third-party-vendors-support"}},[e._v("Adding more 3rd party repositories support")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#contribute-to-testing"}},[e._v("Testing")])])]),e._v(" "),t("h2",{attrs:{id:"third-party-vendors-support"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#third-party-vendors-support"}},[e._v("#")]),e._v(" Third-party vendors support")]),e._v(" "),t("p",[e._v("Currently, the ELevate project supports the following of 3rd party repositories:")]),e._v(" "),t("ul",[t("li",[e._v("EPEL support is currently available for upgrades to AlmaLinux OS only. "),t("strong",[e._v("Note")]),e._v(", that the support works only for those packages from EL 9 that are currently available for EL 10. Unavailable packages from EL 9 will remain on the system after the upgrade.")]),e._v(" "),t("li",[e._v("Docker CE - for all supported operating systems.")]),e._v(" "),t("li",[e._v("MariaDB - for supported operating systems.")]),e._v(" "),t("li",[e._v("nginx - for supported operating systems.")]),e._v(" "),t("li",[e._v("PostgreSQL - for all supported operating systems.")]),e._v(" "),t("li",[e._v("Imunify - for upgrades to EL 8 and EL 10.")]),e._v(" "),t("li",[e._v("KernelCare - for supported operating systems.")]),e._v(" "),t("li",[e._v("TuxCare - for all supported operating systems.")]),e._v(" "),t("li",[e._v("ELevate - for all supported operating systems.")])]),e._v(" "),t("p",[e._v("This guide provides steps to integrate 3rd party repository packages into the ELevate upgrade process.")]),e._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[e._v("DANGER")]),e._v(" "),t("p",[e._v("Note, that all your 3rd party packages must be signed.")])]),e._v(" "),t("ul",[t("li",[e._v("Clone the "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data",target:"_blank",rel:"noopener noreferrer"}},[e._v("leapp-data"),t("OutboundLink")],1),e._v(" repository.")]),e._v(" "),t("li",[e._v("Navigate to the "),t("code",[e._v("vendors.d")]),e._v(" folder. It contains the necessary files for each supported 3rd party repository.")]),e._v(" "),t("li",[e._v("To add a new 3rd party repository to the ELevate process, you must create separate files and fill them out. These files "),t("strong",[e._v("must")]),e._v(" have the same "),t("em",[e._v("<vendor_name>")]),e._v(" part in their names:\n"),t("ul",[t("li",[t("code",[e._v("<vendor_name>_map.json")]),e._v(" - "),t("a",{attrs:{href:"#repository-mapping-file"}},[e._v("repository mapping file")]),e._v(".")]),e._v(" "),t("li",[t("code",[e._v("<vendor_name>.repo")]),e._v(" - "),t("a",{attrs:{href:"#package-repository-file"}},[e._v("package repository information")]),e._v(".")]),e._v(" "),t("li",[t("code",[e._v("<vendor_name>.sigs")]),e._v(" - "),t("a",{attrs:{href:"#package-signatures-list"}},[e._v("list of package signatures of vendor repositories")]),e._v(".")]),e._v(" "),t("li",[t("code",[e._v("<vendor_name>_pes.json")]),e._v(" - "),t("a",{attrs:{href:"#package-migration-event-list"}},[e._v("package migration event list")]),e._v(".")])])])]),e._v(" "),t("h3",{attrs:{id:"repository-mapping-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#repository-mapping-file"}},[e._v("#")]),e._v(" Repository mapping file")]),e._v(" "),t("p",[e._v("The mapping "),t("code",[e._v(".json")]),e._v(" file provides information on mappings between source system repositories (repositories present on the system being upgraded) and target system repositories (package repositories to be used during the upgrade).")]),e._v(" "),t("p",[e._v("In case the 3rd party repository is designed for 2 migration directions, you must prepare 2 mapping JSON files:")]),e._v(" "),t("ul",[t("li",[e._v("<vendor_name>_map.json.el8 - repository mapping file for upgrades to EL8.")]),e._v(" "),t("li",[e._v("<vendor_name>_map.json.el9 - repository mapping file for upgrades to EL9.")])]),e._v(" "),t("p",[e._v("The mapping JSON file structure includes:")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("datetime")]),e._v(" - a generated date-time stamp, for example: "),t("code",[e._v("202306191741Z")]),e._v(".")]),e._v(" "),t("li",[t("strong",[e._v("version")]),e._v(" - version of the database, you can check the current version in the "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data",target:"_blank",rel:"noopener noreferrer"}},[e._v("leapp-data repository"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("li",[e._v("Two sections, described below:\n"),t("ul",[t("li",[t("strong",[e._v("mapping")])]),e._v(" "),t("li",[t("strong",[e._v("repositories")])])])])]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("The mapping file defines whether a vendor's packages will be included in the upgrade process. If at least one source repository listed in the file is present on the system, the vendor is considered active, and package repositories/PES events are enabled - otherwise, they "),t("strong",[e._v("will not")]),e._v(" affect the upgrade process.")])]),e._v(" "),t("h4",{attrs:{id:"mapping-section"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mapping-section"}},[e._v("#")]),e._v(" Mapping section")]),e._v(" "),t("p",[e._v("The mapping section establishes connections between repositories.")]),e._v(" "),t("p",[e._v("This section defines a mapping between major system versions. It contains the following elements:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("source_major_version")]),e._v(" - defines a major system version from which the system would be upgraded, "),t("code",[e._v("7")]),e._v(" or"),t("code",[e._v("8")]),e._v(".")]),e._v(" "),t("li",[t("code",[e._v("target_major_version")]),e._v(" - defines a major system version to which the system would be elevated, "),t("code",[e._v("8")]),e._v(" or"),t("code",[e._v("9")]),e._v(".")]),e._v(" "),t("li",[t("code",[e._v("entries")]),e._v(" - defines a list of repository mappings.\n"),t("ul",[t("li",[t("code",[e._v("source")]),e._v(" - defines a source repository that will be found on a pre-upgrade system.")]),e._v(" "),t("li",[t("code",[e._v("target")]),e._v(" - defines a target upgrade repository (or a list of repositories) that will contain new versions of packages.")]),e._v(" "),t("li",[e._v("Each source repository can map to one or multiple target repositories.")]),e._v(" "),t("li",[t("code",[e._v("source")]),e._v(" and "),t("code",[e._v("target")]),e._v(" repositories must be listed and defined in the "),t("em",[e._v("repository")]),e._v(" section and the "),t("code",[e._v(".pes")]),e._v(" file, and their IDs must match.")])])])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("You can refer to MariDB examples: "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data/blob/main/vendors.d/mariadb_map.json.el8",target:"_blank",rel:"noopener noreferrer"}},[e._v("mariadb_map.json.el8"),t("OutboundLink")],1),e._v(" and "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data/blob/main/vendors.d/mariadb_map.json.el9",target:"_blank",rel:"noopener noreferrer"}},[e._v("mariadb_map.json.el9"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("h4",{attrs:{id:"repositories-section"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#repositories-section"}},[e._v("#")]),e._v(" Repositories section")]),e._v(" "),t("p",[e._v("The repositories section provides both source and target repositories information.")]),e._v(" "),t("p",[e._v("Each repository should contain its own unique information:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("pesid")]),e._v(" - ID specific to mapping/PES files, if it doesn't match, the upgrade will fail with a corresponding error.")]),e._v(" "),t("li",[t("code",[e._v("entires")]),e._v(":\n"),t("ul",[t("li",[t("code",[e._v("major_version")]),e._v(" - defines a major system version.")]),e._v(" "),t("li",[t("code",[e._v("repoid")]),e._v(" - defines a repository ID. It must match its ID from its "),t("code",[e._v(".repo")]),e._v(" file, but it doesn't have to match its 'pesid`.")]),e._v(" "),t("li",[t("code",[e._v("arch")]),e._v(" - defines the system architecture for which this repository is relevant.")]),e._v(" "),t("li",[t("code",[e._v("channel")]),e._v(" - Red Hat specific argument, defines one of the following repository channels:\n"),t("ul",[t("li",[e._v("ga - general availability (stable) repositories; the most used one.")]),e._v(" "),t("li",[e._v("beta - beta/testing repositories.")]),e._v(" "),t("li",[e._v("eus, e4s, aus, tus - stand for Extended Update Support, Update Services for SAP Solutions, Advanced Update Support, and Telco Extended Update Support respectively.")])])]),e._v(" "),t("li",[t("code",[e._v("repo_type")]),e._v(" - defines one of the following repository types:\n"),t("ul",[t("li",[e._v("rpm - for RPM packages.")]),e._v(" "),t("li",[e._v("srpm - for source packages.")]),e._v(" "),t("li",[e._v("debuginfo - for packages with debug information.")])])])])])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("You can refer to MariDB examples: "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data/blob/main/vendors.d/mariadb_map.json.el8",target:"_blank",rel:"noopener noreferrer"}},[e._v("mariadb_map.json.el8"),t("OutboundLink")],1),e._v(" and "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data/blob/main/vendors.d/mariadb_map.json.el9",target:"_blank",rel:"noopener noreferrer"}},[e._v("mariadb_map.json.el9"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("h3",{attrs:{id:"package-repository-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#package-repository-file"}},[e._v("#")]),e._v(" Package repository file")]),e._v(" "),t("p",[e._v("The package repository"),t("code",[e._v(".repo")]),e._v(" file defines the vendor's package repositories that will be used during the upgrade.")]),e._v(" "),t("p",[e._v("In case the 3rd party repository is designed for 2 migration directories, you must prepare 2 repository files:")]),e._v(" "),t("ul",[t("li",[e._v("<vendor_name>.repo.el8 - repository information for upgrades to EL8.")]),e._v(" "),t("li",[e._v("<vendor_name>.repo.el9 - repository information for upgrades to EL9.")])]),e._v(" "),t("p",[e._v("The repository file has the same format that is typical for YUM/DNF package repository files:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("[repository ID]\nname = repository name\nbaseurl = repository baseurl\ngpgkey = GPG Key directory\ngpgcheck = 1\nenabled = 1\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("You can also refer to MariDB examples: "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data/blob/main/vendors.d/mariadb.repo.el8",target:"_blank",rel:"noopener noreferrer"}},[e._v("mariadb.repo.el8"),t("OutboundLink")],1),e._v(" and "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data/blob/main/vendors.d/mariadb.repo.el9",target:"_blank",rel:"noopener noreferrer"}},[e._v("mariadb.repo.el9"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("p",[t("strong",[e._v("NOTE:")]),e._v(" The repositories listed in this repo file are only used "),t("em",[e._v("during")]),e._v(" the upgrade. Package repositories on the post-upgrade system should be provided through updated packages or custom repository deployment.")]),e._v(" "),t("h3",{attrs:{id:"package-signatures-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#package-signatures-list"}},[e._v("#")]),e._v(" Package signatures list")]),e._v(" "),t("p",[e._v("The package signature "),t("code",[e._v(".sigs")]),e._v(" file should contain the list of public signature headers that the packages are signed with.")]),e._v(" "),t("p",[e._v("You can find signature headers for your packages by running the following command:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rpm -qip <PACKAGE_NAME> | grep Signature\n")])])]),t("h5",{attrs:{id:"an-example-output"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#an-example-output"}},[e._v("#")]),e._v(" An example output:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Signature   : DSA/SHA1, Mon Aug 23 08:17:13 2021, Key ID 8c55a6628608cb71\n")])])]),t("p",[e._v("The "),t("code",[e._v("Key ID")]),e._v(" value after - "),t("code",[e._v("8c55a6628608cb71")]),e._v(" from the example - is the public signature header you must put into the signature file.\nThe file format is designed to have "),t("em",[e._v("one signature per line")]),e._v(".")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("You can also refer to MariDB examples: "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data/blob/main/vendors.d/mariadb.sigs",target:"_blank",rel:"noopener noreferrer"}},[e._v("mariadb.sigs"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("h3",{attrs:{id:"package-migration-event-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#package-migration-event-list"}},[e._v("#")]),e._v(" Package migration event list")]),e._v(" "),t("p",[e._v("The package migration event list is used for complex specific package actions that can not be handled by DNF.")]),e._v(" "),t("p",[e._v("Typically this data can be found in the "),t("code",[e._v("leapp-data/vendors.d/<vendor_name>_pes.json")]),e._v(" file in the "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub repository"),t("OutboundLink")],1),e._v(" and the "),t("code",[e._v("/etc/leapp/files/vendors.d/<vendor_name>_pes.json")]),e._v(" file on a system that is being upgraded.")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("Actions from PES JSON files will be in effect only for those packages that are signed "),t("strong",[e._v("and")]),e._v(" have their signatures in one of the active <vendor_name>.sigs files. Unsigned packages will be updated only if some signed package requires a new version, otherwise, they will be left as they are.")])]),e._v(" "),t("h4",{attrs:{id:"creating-a-pes-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-pes-json"}},[e._v("#")]),e._v(" Creating a "),t("code",[e._v("pes.json")])]),e._v(" "),t("p",[e._v("If your 3rd party packages don't require any additional actions, stick to the following format to create your pes.json file:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{\n    "legal_notice": "",\n    "packageinfo": [],\n    "provided_data_streams": [\n        "2.0"\n    ],\n    "timestamp": "202408081321Z"\n}\n')])])]),t("p",[e._v("If the packages require additional action, fill in the file to add the information for the upgrade.")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Add a new entry to the "),t("code",[e._v("packageinfo")]),e._v(" array.")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("action")]),e._v(" - defines which of the following actions will be performed for your 3rd party vendor packages. Actions "),t("strong",[e._v("1")]),e._v(", "),t("strong",[e._v("3")]),e._v(", "),t("strong",[e._v("4")]),e._v(" and "),t("strong",[e._v("5")]),e._v(" are the most used ones.")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("0")]),e._v(" - present;\n"),t("ul",[t("li",[e._v("keep the packages in "),t("code",[e._v("in_packageset")]),e._v(" to ensure the repo they reside in on the target system gets enabled.")])])]),e._v(" "),t("li",[t("code",[e._v("1")]),e._v(" - removed;\n"),t("ul",[t("li",[e._v("remove all packages in "),t("code",[e._v("in_packageset")]),e._v(".")])])]),e._v(" "),t("li",[t("code",[e._v("2")]),e._v(" - deprecated;\n"),t("ul",[t("li",[e._v("keep the packages in "),t("code",[e._v("in_packageset")]),e._v(" to ensure the repo they reside in on the target system gets enabled.")])])]),e._v(" "),t("li",[t("code",[e._v("3")]),e._v(" - replaced;\n"),t("ul",[t("li",[e._v("remove all packages in "),t("code",[e._v("in_packageset")]),e._v(".")]),e._v(" "),t("li",[e._v("install parts of the "),t("code",[e._v("out_packageset")]),e._v(" that are not present on the system.")]),e._v(" "),t("li",[e._v("keep the packages from "),t("code",[e._v("out_packageset")]),e._v(" that are already installed.")])])]),e._v(" "),t("li",[t("code",[e._v("4")]),e._v(" - split\n"),t("ul",[t("li",[e._v("install parts of the "),t("code",[e._v("out_packageset")]),e._v(" that are not present on the system")]),e._v(" "),t("li",[e._v("keep the present "),t("code",[e._v("out_packageset")]),e._v(".")]),e._v(" "),t("li",[e._v("remove packages from "),t("code",[e._v("in_packageset")]),e._v(" that are not present in "),t("code",[e._v("out_packageset")]),e._v(".")]),e._v(" "),t("li",[e._v("in case of package X being split into Y and Z, package X will be removed.")]),e._v(" "),t("li",[e._v("in case of package X being split into X and Y, package X will "),t("strong",[e._v("not")]),e._v(" be removed.")])]),e._v(" "),t("h5",{attrs:{id:"an-example-action-structure"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#an-example-action-structure"}},[e._v("#")]),e._v(" An example action structure:")]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("DETAILS")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('   {\n    "action": 4,\n    "architectures": [\n        "aarch64",\n        "ppc64le",\n        "s390x",\n        "x86_64"\n    ],\n    "id": 23,\n    "in_packageset": {\n        "package": [\n            {\n                "modulestreams": [\n                    null\n                ],\n                "name": "ntp",\n                "repository": "base"\n            }\n        ],\n        "set_id": 29\n    },\n    "initial_release": {\n        "major_version": 7,\n        "minor_version": 7,\n        "os_name": "CentOS"\n    },\n    "modulestream_maps": [\n        {\n            "in_modulestream": null,\n            "out_modulestream": null\n        }\n    ],\n    "out_packageset": {\n        "package": [\n            {\n                "modulestreams": [\n                    null\n                ],\n                "name": "chrony",\n                "repository": "almalinux8-baseos"\n            },\n            {\n                "modulestreams": [\n                    null\n                ],\n                "name": "ntpstat",\n                "repository": "almalinux8-appstream"\n            }\n        ],\n        "set_id": 30\n    },\n    "release": {\n        "major_version": 8,\n        "minor_version": 0,\n        "os_name": "AlmaLinux"\n    }\n},\n')])])])])]),e._v(" "),t("li",[t("code",[e._v("5")]),e._v(" - merged\n"),t("ul",[t("li",[e._v("install packages from the "),t("code",[e._v("out_packageset")]),e._v(" that are not present on the system.")]),e._v(" "),t("li",[e._v("remove packages from "),t("code",[e._v("in_packageset")]),e._v(" that are not present in "),t("code",[e._v("out_packageset")]),e._v(".")]),e._v(" "),t("li",[e._v("in case of packages Y and Z being merged to X, packages Y and Z will be removed.")]),e._v(" "),t("li",[e._v("in case of packages Y and Z are not being merged to X, packages Y and Z will "),t("strong",[e._v("not")]),e._v(" be removed .")])]),e._v(" "),t("h5",{attrs:{id:"an-example-action-structure-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#an-example-action-structure-2"}},[e._v("#")]),e._v(" An example action structure:")]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("DETAILS")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('   {\n    "action": 5,\n    "architectures": [\n        "aarch64",\n        "ppc64le",\n        "s390x",\n        "x86_64"\n    ],\n    "id": 93,\n    "in_packageset": {\n        "package": [\n            {\n                "modulestreams": [\n                    null\n                ],\n                "name": "infiniband-diags",\n                "repository": "base"\n            },\n            {\n                "modulestreams": [\n                    null\n                ],\n                "name": "libibmad",\n                "repository": "base"\n            }\n        ],\n        "set_id": 118\n    },\n    "initial_release": {\n        "major_version": 7,\n        "minor_version": 7,\n        "os_name": "CentOS"\n    },\n    "modulestream_maps": [\n        {\n            "in_modulestream": null,\n            "out_modulestream": null\n        }\n    ],\n    "out_packageset": {\n        "package": [\n            {\n                "modulestreams": [\n                    null\n                ],\n                "name": "infiniband-diags",\n                "repository": "almalinux8-baseos"\n            }\n        ],\n        "set_id": 9451\n    },\n    "release": {\n        "major_version": 8,\n        "minor_version": 0,\n        "os_name": "AlmaLinux"\n    }\n},\n')])])])])]),e._v(" "),t("li",[t("code",[e._v("6")]),e._v(" - moved to new repository\n"),t("ul",[t("li",[e._v("keep the package to make sure the repo it's in on the target system gets enabled.")]),e._v(" "),t("li",[e._v("nothing happens to "),t("code",[e._v("in_packageset")]),e._v(' as it always contains one package - the same as the "out" package.')])])]),e._v(" "),t("li",[t("code",[e._v("7")]),e._v(" - renamed\n"),t("ul",[t("li",[e._v("remove the "),t("code",[e._v("in_packageset")]),e._v(" and install the "),t("code",[e._v("out_packageset")]),e._v(" if not installed.")]),e._v(" "),t("li",[e._v("if already installed, keep the "),t("code",[e._v("out_packageset")]),e._v(" as-is.")])])]),e._v(" "),t("li",[t("code",[e._v("8")]),e._v(" - reinstalled\n"),t("ul",[t("li",[e._v("reinstall the "),t("code",[e._v("in_packageset")]),e._v(" package during the upgrade transaction.")]),e._v(" "),t("li",[e._v("mostly useful for packages that have the same version string between major versions, and thus won't be upgraded automatically.")])])])]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("Additional notes and exceptions:")]),e._v(" "),t("ul",[t("li",[e._v("any event except "),t("code",[e._v("present")]),e._v(" is ignored if any of the packages in "),t("code",[e._v("in_packageset")]),e._v(" are marked for removal.")]),e._v(" "),t("li",[e._v("any event except "),t("code",[e._v("merged")]),e._v(" is ignored if any of the packages in "),t("code",[e._v("in_packageset")]),e._v(" are neither installed nor marked for installation.")]),e._v(" "),t("li",[e._v("for "),t("code",[e._v("merged")]),e._v(" events it is sufficient to have at least one package from "),t("code",[e._v("in_packageset")]),e._v(" either installed or marked for installation.")])])])]),e._v(" "),t("li",[t("p",[t("code",[e._v("architectures")]),e._v(" - defines what system architectures the listed actions are effective for. *"),t("code",[e._v("id")]),e._v(" - defines entry ID, must be unique; use the scripts below to check your ID.")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("in_packageset")]),e._v(" - defines a set of packages on the system to be upgraded.")]),e._v(" "),t("ul",[t("li",[e._v("The "),t("code",[e._v("repository")]),e._v(" field defines the package repository the package was installed from on the source system.")])])]),e._v(" "),t("li",[t("p",[t("code",[e._v("out_packageset")]),e._v(" - defines a set of packages to switch to.")]),e._v(" "),t("ul",[t("li",[e._v("The "),t("code",[e._v("repository")]),e._v(' field for packages should be the same as the "Target system repo name in PES" field in the associated vendor repository mapping file.')])])]),e._v(" "),t("li",[t("p",[t("code",[e._v("initial_release")]),e._v(" - defines a system that is to be upgraded, must include OS major and minor versions, and OS name.")])])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("release")]),e._v(" - defines target system, must include OS major and minor versions, and OS name.")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("The Leapp-tool doesn't force packages from "),t("code",[e._v("out_packageset")]),e._v(" to be installed from the specific repository. Instead, it enables repo from "),t("code",[e._v("out_packageset")]),e._v(" and then DNF installs the latest package version from all enabled repos.")])]),e._v(" "),t("p",[e._v("When creating "),t("code",[e._v("in_packageset")]),e._v(" and "),t("code",[e._v("out_packageset")]),e._v(" lists, please, stick to the following format:")]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[e._v("      "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"in_packageset"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"package"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"module_stream"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token null keyword"}},[e._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"PackageKit"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"repository"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"base"')]),e._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"module_stream"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token null keyword"}},[e._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"PackageKit-yum"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"repository"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"base"')]),e._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"set_id"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1592")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n")])])]),t("h4",{attrs:{id:"validate-pes-json-and-id"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#validate-pes-json-and-id"}},[e._v("#")]),e._v(" Validate "),t("code",[e._v("pes.json")]),e._v(" and ID")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("You can run the following scripts that will validate your package migration events file"),t("code",[e._v("pes.json")]),e._v(" and check ID for duplication:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('#!/bin/bash\n\nDISTRO=$1\nPWD=$( pwd )\n\nif [ -z "$DISTRO" ]; then\n    echo "$0 almalinux|centos"\n    exit 1\nfi\n\nJSON_FILES=$(find ${PWD}/files/${DISTRO}/ -path "./tests" -prune -o -name "*pes*.json" -print0 | xargs -0 echo)\nJSON_FILES="${JSON_FILES} $(find ${PWD}/vendors.d/ -path "./tests" -prune -o -name "*pes*.json*" -print0 | xargs -0 echo)"\n\n\necho "Validating ${JSON_FILES} for the ${DISTRO}"\necho\n\necho "... run tests/validate_json.py"\npython3 tests/validate_json.py tests/pes-events-schema.json $JSON_FILES ||   exit 1\necho\n\necho "... run tests/validate_ids.py"\npython3 tests/validate_ids.py $JSON_FILES || exit 1\necho\n\necho "... run tests/check_debranding.py"\npython3 tests/check_debranding.py ${PWD}/files/${DISTRO}/pes-events.json || exit 1\necho\n\necho "$DISTRO - OK"\nexit 0\n')])])])]),e._v(" "),t("li",[t("p",[e._v("Check ID for duplication and fix it:")])])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('  #!/bin/bash\n\n  DISTRO=$1\n  PWD=$( pwd )\n\n  if [ -z "$DISTRO" ]; then\n      echo "$0 almalinux|centos"\n      exit 1\n  fi\n\n  JSON_FILES=$( find ${PWD}/vendors.d/ -path "./tests" -prune -o -name "*pes*.json*" -print0 | xargs -0 echo )\n\n  python3 tools/id_uniquifier.py ./files/${DISTRO}/pes-events.json $JSON_FILES || exit 1\n\n  echo "$DISTRO - OK"\n')])])]),t("h3",{attrs:{id:"creating-a-pull-request"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-pull-request"}},[e._v("#")]),e._v(" Creating a pull request")]),e._v(" "),t("p",[e._v("Once you've prepared the vendor data for migration and tested the upgrade process, create a pull request to "),t("a",{attrs:{href:"https://github.com/AlmaLinux/leapp-data",target:"_blank",rel:"noopener noreferrer"}},[e._v("leapp-data repository"),t("OutboundLink")],1),e._v(" to make it publicly available.")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("When testing on your system, put your vendor files to the "),t("code",[e._v("/etc/leapp/files/vendors.d/")]),e._v(" directory before starting the upgrade.")])]),e._v(" "),t("p",[e._v("Next, when the pull request is submitted, the AlmaLinux Team will review it.")]),e._v(" "),t("h2",{attrs:{id:"contribute-to-testing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contribute-to-testing"}},[e._v("#")]),e._v(" Contribute to Testing")]),e._v(" "),t("p",[e._v("We are also seeking contributors to test new ELevate features and upgrade directions.")]),e._v(" "),t("p",[e._v("The current ELevate process is the following:")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/elevate-testing-scheme.webp",alt:"image"}})]),e._v(" "),t("ul",[t("li",[e._v("ELevate NG is designed to collect community contributions such as new support, features and bugfixes, leapp-repository, and leapp-data new versions. We test these enhancements first and welcome the community to test them. If you are interested please refer to the "),t("a",{attrs:{href:"https://wiki.almalinux.org/elevate/ELevate-NG-testing-guide.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ELevate NG Testing Guide"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("li",[e._v("ELevate NG goes to the general testing. If you are interested please refer to the "),t("a",{attrs:{href:"https://wiki.almalinux.org/elevate/ELevate-testing-guide.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ELevate Testing Guide"),t("OutboundLink")],1),e._v(". Meanwhile, ELevate NG gathers new data, features and improvements.")]),e._v(" "),t("li",[e._v("When the updated process is tested and approved, the Almainux Team releases it to ELevate Stable and publishes the announcement via "),t("a",{attrs:{href:"https://almalinux.org/blog/",target:"_blank",rel:"noopener noreferrer"}},[e._v("AlmaLinux Blog"),t("OutboundLink")],1),e._v(", Social Media and "),t("a",{attrs:{href:"https://lists.almalinux.org/mailman3/lists/?all-lists",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mailing List"),t("OutboundLink")],1),e._v(" which you can subscribe not the miss the news!")])]),e._v(" "),t("h2",{attrs:{id:"get-help"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#get-help"}},[e._v("#")]),e._v(" Get Help")]),e._v(" "),t("p",[e._v("For more help and assistance reach out to us in the ~migration channel on the "),t("a",{attrs:{href:"https://chat.almalinux.org/almalinux/channels/migration",target:"_blank",rel:"noopener noreferrer"}},[e._v("AlmaLinux Community Chat"),t("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=n.exports}}]);